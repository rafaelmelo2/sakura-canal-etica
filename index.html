<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canal de Ética - Sakura</title>
    <!-- Carrega o Tailwind CSS para estilização rápida -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Importa a fonte Inter para um visual limpo e moderno -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* Define a fonte Inter como padrão */
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Estilização para o scrollbar dentro do modal (pop-up) */
        .modal-body::-webkit-scrollbar {
            width: 8px;
        }

        .modal-body::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .modal-body::-webkit-scrollbar-thumb {
            background: #c5c5c5;
            border-radius: 10px;
        }

        .modal-body::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
</head>

<body class="bg-gray-100 font-inter">

    <div class="container mx-auto max-w-2xl p-4 py-12 md:p-8">

        <!-- Container principal do formulário -->
        <main class="bg-white p-8 rounded-lg shadow-lg w-full">

            <!-- Logo da Empresa -->
            <header class="text-center mb-8">
                <img src="logo.png" alt="Logo Sakura" class="w-48 mx-auto"
                    onerror="this.onerror=null; this.src='https://placehold.co/192x100/f87171/ffffff?text=Sakura+Logo'; this.classList.add('p-4', 'border', 'border-dashed');">
            </header>

            <h1 class="text-3xl font-bold text-center text-gray-800 mb-2">Canal de Ética</h1>
            <p class="text-center text-gray-600 mb-8">
                Este é um ambiente seguro e confidencial para relatar condutas que violem nosso Código de Ética,
                incluindo assédio moral, sexual, discriminação ou fraude.
            </p>

            <!-- Formulário para envio via SMTP -->
            <form id="ethicsForm">

                <div class="space-y-6">

                    <!-- Tipo de Relato -->
                    <div>
                        <label for="tipo_relato" class="block text-sm font-medium text-gray-700">Qual o tipo de
                            relato?</label>
                        <select id="tipo_relato" name="Tipo_de_Relato"
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500"
                            required>
                            <option value="" disabled selected>Selecione uma opção</option>
                            <option value="Assédio Moral">Assédio Moral</option>
                            <option value="Assédio Sexual">Assédio Sexual</option>
                            <option value="Discriminação">Discriminação (Racial, Gênero, Orientação Sexual, etc.)
                            </option>
                            <option value="Fraude ou Corrupção">Fraude ou Corrupção</option>
                            <option value="Violação de Políticas">Violação de Políticas Internas</option>
                            <option value="Segurança do Trabalho">Risco à Segurança do Trabalho</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>

                    <!-- Opção de Anonimato -->
                    <div class="relative flex items-start">
                        <div class="flex h-6 items-center">
                            <input id="anonimato" name="Identificacao" value="Deseja se identificar" type="checkbox"
                                class="h-4 w-4 rounded border-gray-300 text-red-600 focus:ring-red-500">
                        </div>
                        <div class="ml-3 text-sm leading-6">
                            <label for="anonimato" class="font-medium text-gray-700">Desejo me identificar
                                (Opcional)</label>
                            <p class="text-gray-500">Seu relato será tratado com confidencialidade, mesmo que se
                                identifique.</p>
                        </div>
                    </div>

                    <!-- Campos de Identificação (Ocultos por padrão) -->
                    <div id="identificacaoFields" class="hidden space-y-4 rounded-md border border-gray-200 p-4">
                        <div>
                            <label for="nome" class="block text-sm font-medium text-gray-700">Seu nome</label>
                            <input type="text" id="nome" name="Nome"
                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500">
                        </div>
                        <div>
                            <label for="contato" class="block text-sm font-medium text-gray-700">Seu e-mail ou telefone
                                (para acompanhamento)</label>
                            <input type="text" id="contato" name="Contato"
                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500">
                        </div>
                    </div>

                    <!-- Pessoas Envolvidas -->
                    <div>
                        <label for="pessoas" class="block text-sm font-medium text-gray-700">Quem são as pessoas
                            envolvidas no relato?</label>
                        <textarea id="pessoas" name="Pessoas_Envolvidas" rows="2"
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500"
                            placeholder="Nomes, cargos ou áreas. Se não souber, descreva características."></textarea>
                    </div>

                    <!-- Descrição da Denúncia -->
                    <div>
                        <label for="descricao" class="block text-sm font-medium text-gray-700">Descrição do fato</label>
                        <textarea id="descricao" name="Descricao_da_Denuncia" rows="8"
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500"
                            placeholder="Descreva o que aconteceu, quando, onde, e com quem. Forneça o máximo de detalhes possível para ajudar na apuração."
                            required></textarea>
                    </div>

                    <!-- Mensagens de Feedback -->
                    <div id="submissionMessage" class="hidden p-4 rounded-md mb-4">
                        <p id="messageText" class="text-sm"></p>
                    </div>
                    <div id="loadingMessage" class="hidden p-4 rounded-md bg-blue-50 border border-blue-200 mb-4">
                        <p class="text-sm text-blue-700">
                            <strong>Enviando...</strong> Aguarde enquanto processamos sua denúncia.
                        </p>
                    </div>

                    <!-- Botão Enviar -->
                    <div>
                        <button type="submit"
                            class="w-full flex justify-center py-3 px-4 rounded-md shadow-sm text-base font-semibold text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200">
                            Enviar Denúncia
                        </button>
                    </div>
                </div>
            </form>

            <!-- Divisor -->
            <div class="relative my-8">
                <div class="absolute inset-0 flex items-center" aria-hidden="true">
                    <div class="w-full border-t border-gray-300"></div>
                </div>
                <div class="relative flex justify-center">
                    <span class="bg-white px-2 text-sm text-gray-500">Documentos</span>
                </div>
            </div>

            <!-- Botão Código de Conduta -->
            <div>
                <button id="openModalBtn" type="button"
                    class="w-full flex justify-center py-3 px-4 rounded-md shadow-sm text-base font-semibold text-gray-700 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-colors duration-200">
                    Ver Código de Conduta
                </button>
            </div>
        </main>

        <footer class="text-center mt-8 text-gray-500 text-sm">
            <p>&copy; 2024 Sakura. Todos os direitos reservados.</p>
        </footer>
    </div>


    <!-- 
      Modal (Pop-up) do Código de Conduta
      Inicialmente oculto (classe 'hidden')
    -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] flex flex-col">
            <!-- Cabeçalho do Modal -->
            <div class="flex justify-between items-center p-6 border-b border-gray-200">
                <h2 class="text-2xl font-bold text-gray-800">Código de Conduta e Ética</h2>
                <button id="closeModalBtn" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>

            <!-- Corpo do Modal (com scroll) -->
            <div class="modal-body p-6 md:p-8 overflow-y-auto space-y-4 text-gray-700">

                <!-- 
                  AQUI VOCÊ DEVE INSERIR O SEU CÓDIGO DE CONDUTA.
                  O texto abaixo é apenas um exemplo.
                -->

                <p class="font-semibold text-lg">Preâmbulo</p>
                <p>O presente Código de Conduta e Ética ("Código") estabelece os princípios e valores que norteiam a
                    atuação da Sakura e de todos os seus colaboradores, independentemente do cargo ou função. Nosso
                    compromisso é com a transparência, integridade, respeito e segurança nas relações de trabalho.</p>

                <p class="font-semibold text-lg mt-6">1. Combate ao Assédio</p>
                <p>A Sakura repudia veementemente qualquer forma de assédio, seja moral ou sexual. </p>
                <ul class="list-disc list-inside space-y-1 ml-4">
                    <li><strong>Assédio Moral:</strong> Toda e qualquer conduta abusiva (gesto, palavra, comportamento)
                        que atente, por sua repetição ou sistematização, contra a dignidade ou integridade psíquica ou
                        física de uma pessoa, ameaçando seu emprego ou degradando o ambiente de trabalho.</li>
                    <li><strong>Assédio Sexual:</strong> Conduta de natureza sexual, manifestada fisicamente, por
                        palavras, gestos ou outros meios, propostas ou impostas a pessoas contra sua vontade,
                        causando-lhe constrangimento e violando a sua liberdade sexual.</li>
                </ul>
                <p>Não toleramos intimidação, humilhação, exposição vexatória ou qualquer forma de desrespeito no
                    ambiente de trabalho.</p>

                <p class="font-semibold text-lg mt-6">2. Diversidade e Inclusão</p>
                <p>Promovemos um ambiente de trabalho inclusivo, que valoriza a diversidade e repudia qualquer forma de
                    discriminação, seja por raça, cor, etnia, religião, gênero, orientação sexual, idade, deficiência ou
                    qualquer outra característica.</p>

                <p class="font-semibold text-lg mt-6">3. Conflito de Interesses</p>
                <p>Os colaboradores devem agir sempre no melhor interesse da Sakura, evitando situações que configurem
                    conflito de interesses, real ou aparente, entre suas atividades pessoais e profissionais.</p>

                <p class="font-semibold text-lg mt-6">4. Confidencialidade</p>
                <p>As informações da empresa, seus clientes e parceiros são confidenciais e devem ser tratadas com o
                    máximo sigilo, não podendo ser utilizadas para fins pessoais ou repassadas a terceiros não
                    autorizados.</p>

                <p class="font-semibold text-lg mt-6">5. Uso do Canal de Ética</p>
                <p>Este Canal é a ferramenta oficial para o relato seguro, e se desejado, anônimo, de violações a este
                    Código. Garantimos que nenhuma retaliação será tolerada contra qualquer pessoa que, de boa-fé,
                    relate uma preocupação ou participe de uma investigação.</p>

            </div>

            <!-- Rodapé do Modal -->
            <div class="p-4 bg-gray-50 border-t border-gray-200 text-right">
                <button id="closeModalBtnFooter"
                    class="px-6 py-2 rounded-md text-gray-700 bg-gray-200 hover:bg-gray-300 font-medium">
                    Fechar
                </button>
            </div>
        </div>
    </div>


    <script>
        // URL do servidor backend (ajuste se necessário)
        const API_URL = 'http://localhost:3000/api';

        // Função para mostrar mensagem de feedback
        function showMessage(message, isError = false) {
            const submissionMessage = document.getElementById('submissionMessage');
            const messageText = document.getElementById('messageText');
            const loadingMessage = document.getElementById('loadingMessage');

            loadingMessage.classList.add('hidden');

            messageText.textContent = message;
            submissionMessage.classList.remove('hidden');

            if (isError) {
                submissionMessage.className = 'p-4 rounded-md mb-4 bg-red-50 border border-red-200';
                messageText.className = 'text-sm text-red-700';
            } else {
                submissionMessage.className = 'p-4 rounded-md mb-4 bg-green-50 border border-green-200';
                messageText.className = 'text-sm text-green-700';
            }
        }

        // Função para mostrar loading
        function showLoading() {
            const loadingMessage = document.getElementById('loadingMessage');
            const submissionMessage = document.getElementById('submissionMessage');
            loadingMessage.classList.remove('hidden');
            submissionMessage.classList.add('hidden');
        }

        // Função para enviar e-mail via backend
        async function sendEmail(formData) {
            const data = {
                tipo_relato: formData.get('Tipo_de_Relato'),
                identificacao: formData.get('Identificacao'),
                nome: formData.get('Nome') || '',
                contato: formData.get('Contato') || '',
                pessoas_envolvidas: formData.get('Pessoas_Envolvidas') || '',
                descricao: formData.get('Descricao_da_Denuncia')
            };

            try {
                const response = await fetch(`${API_URL}/send-email`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (result.success) {
                    showMessage('✓ Denúncia enviada com sucesso! Entraremos em contato em breve.', false);
                    // Limpa o formulário após 2 segundos
                    setTimeout(() => {
                        document.getElementById('ethicsForm').reset();
                        document.getElementById('identificacaoFields').classList.add('hidden');
                    }, 2000);
                } else {
                    showMessage(`Erro: ${result.message}`, true);
                }
            } catch (error) {
                console.error('Erro ao enviar e-mail:', error);
                showMessage('Erro ao enviar a denúncia. Verifique se o servidor backend está rodando.', true);
            }
        }

        // Aguarda o carregamento completo do documento
        document.addEventListener('DOMContentLoaded', () => {

            // --- Lógica para o formulário ---
            const ethicsForm = document.getElementById('ethicsForm');
            const anonCheckbox = document.getElementById('anonimato');
            const identificacaoFields = document.getElementById('identificacaoFields');

            // Alterna a exibição dos campos de identificação
            anonCheckbox.addEventListener('change', () => {
                if (anonCheckbox.checked) {
                    identificacaoFields.classList.remove('hidden');
                } else {
                    identificacaoFields.classList.add('hidden');
                    // Limpa os campos caso o usuário desmarque
                    identificacaoFields.querySelector('#nome').value = '';
                    identificacaoFields.querySelector('#contato').value = '';
                }
            });

            // Lida com o envio do formulário
            ethicsForm.addEventListener('submit', (e) => {
                e.preventDefault();

                // Valida se o campo obrigatório foi preenchido
                const descricao = document.getElementById('descricao').value.trim();
                if (!descricao) {
                    showMessage('Por favor, preencha a descrição do fato antes de enviar.', true);
                    return;
                }

                // Coleta os dados do formulário
                const formData = new FormData(ethicsForm);

                // Mostra mensagem de carregamento
                showLoading();

                // Envia o e-mail
                sendEmail(formData);
            });


            // --- Lógica para o Modal (Pop-up) ---
            const modal = document.getElementById('modal');
            const openModalBtn = document.getElementById('openModalBtn');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const closeModalBtnFooter = document.getElementById('closeModalBtnFooter');

            // Função para abrir o modal
            const openModal = () => modal.classList.remove('hidden');

            // Função para fechar o modal
            const closeModal = () => modal.classList.add('hidden');

            // Eventos de clique
            openModalBtn.addEventListener('click', openModal);
            closeModalBtn.addEventListener('click', closeModal);
            closeModalBtnFooter.addEventListener('click', closeModal);

            // Fecha o modal ao clicar fora da área de conteúdo (no overlay escuro)
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });

        });
    </script>

</body>

</html>